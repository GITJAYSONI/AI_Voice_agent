# AI Voice Agent - Visual Workflow Diagram

## ğŸ¯ Complete System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           PHONE CALL INITIATED                              â”‚
â”‚                                                                             â”‚
â”‚                              ğŸ“± User Dials                                  â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â–¼                                        â”‚
â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚                            â”‚    TWILIO    â”‚                                â”‚
â”‚                            â”‚  (Cloud PBX) â”‚                                â”‚
â”‚                            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ HTTP POST                               â”‚
â”‚                                   â–¼                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         YOUR FASTAPI SERVER                                 â”‚
â”‚                         (Running on port 5000)                              â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚  ENDPOINT 1: POST /incoming-call                                â”‚      â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚      â”‚
â”‚   â”‚  â”‚ def handle_incoming_call(request)                      â”‚     â”‚      â”‚
â”‚   â”‚  â”‚   Returns TwiML:                                       â”‚     â”‚      â”‚
â”‚   â”‚  â”‚   <Response>                                           â”‚     â”‚      â”‚
â”‚   â”‚  â”‚     <Connect>                                          â”‚     â”‚      â”‚
â”‚   â”‚  â”‚       <Stream url="wss://yourserver/media-stream"/>    â”‚     â”‚      â”‚
â”‚   â”‚  â”‚     </Connect>                                         â”‚     â”‚      â”‚
â”‚   â”‚  â”‚   </Response>                                          â”‚     â”‚      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                   â”‚                                         â”‚
â”‚                                   â”‚ WebSocket Connection                    â”‚
â”‚                                   â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚  ENDPOINT 2: WebSocket /media-stream                            â”‚      â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚      â”‚
â”‚   â”‚  â”‚ async def handle_media_stream(websocket)               â”‚     â”‚      â”‚
â”‚   â”‚  â”‚                                                        â”‚     â”‚      â”‚
â”‚   â”‚  â”‚  1. Accept WebSocket connection                       â”‚     â”‚      â”‚
â”‚   â”‚  â”‚  2. Create queues: audio_queue, streamsid_queue       â”‚     â”‚      â”‚
â”‚   â”‚  â”‚  3. Connect to Deepgram                               â”‚     â”‚      â”‚
â”‚   â”‚  â”‚  4. Send config.json to Deepgram                      â”‚     â”‚      â”‚
â”‚   â”‚  â”‚  5. Launch 3 concurrent tasks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚     â”‚      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                       â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â”‚
                                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      THREE CONCURRENT ASYNC TASKS                           â”‚
â”‚                      (Running simultaneously)                               â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  TASK 1:         â”‚    â”‚  TASK 2:         â”‚    â”‚  TASK 3:         â”‚     â”‚
â”‚  â”‚  twilio_receiver â”‚    â”‚  sts_sender      â”‚    â”‚  sts_receiver    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚           â”‚                       â”‚                       â”‚                â”‚
â”‚           â”‚                       â”‚                       â”‚                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Receives from   â”‚     â”‚ Gets chunks     â”‚    â”‚ Waits for       â”‚      â”‚
â”‚  â”‚ Twilio WS:      â”‚     â”‚ from:           â”‚    â”‚ streamsid from: â”‚      â”‚
â”‚  â”‚                 â”‚     â”‚                 â”‚    â”‚                 â”‚      â”‚
â”‚  â”‚ â€¢ "start" event â”‚     â”‚  audio_queue    â”‚    â”‚ streamsid_queue â”‚      â”‚
â”‚  â”‚   â†’ Extract     â”‚     â”‚      â”‚          â”‚    â”‚                 â”‚      â”‚
â”‚  â”‚     streamSid   â”‚     â”‚      â–¼          â”‚    â”‚ Then listens to â”‚      â”‚
â”‚  â”‚   â†’ Put in      â”‚     â”‚ Sends to:       â”‚    â”‚ Deepgram WS     â”‚      â”‚
â”‚  â”‚     streamsid_  â”‚     â”‚                 â”‚    â”‚                 â”‚      â”‚
â”‚  â”‚     queue       â”‚     â”‚  Deepgram WS    â”‚    â”‚ Receives:       â”‚      â”‚
â”‚  â”‚                 â”‚     â”‚      â”‚          â”‚    â”‚ â€¢ Text (JSON)   â”‚      â”‚
â”‚  â”‚ â€¢ "media" event â”‚     â”‚      â”‚          â”‚    â”‚ â€¢ Binary (audio)â”‚      â”‚
â”‚  â”‚   â†’ Decode      â”‚     â”‚      â”‚          â”‚    â”‚                 â”‚      â”‚
â”‚  â”‚     base64      â”‚     â”‚      â”‚          â”‚    â”‚ If text:        â”‚      â”‚
â”‚  â”‚   â†’ Add to      â”‚     â”‚      â”‚          â”‚    â”‚  â†’ Handle       â”‚      â”‚
â”‚  â”‚     inbuffer    â”‚     â”‚      â”‚          â”‚    â”‚    barge-in     â”‚      â”‚
â”‚  â”‚                 â”‚     â”‚      â”‚          â”‚    â”‚                 â”‚      â”‚
â”‚  â”‚ â€¢ When buffer   â”‚     â”‚      â”‚          â”‚    â”‚ If audio:       â”‚      â”‚
â”‚  â”‚   >= 3200 bytes â”‚     â”‚      â”‚          â”‚    â”‚  â†’ Encode       â”‚      â”‚
â”‚  â”‚   â†’ Put chunk   â”‚     â”‚      â”‚          â”‚    â”‚    base64       â”‚      â”‚
â”‚  â”‚     in audio_   â”‚     â”‚      â”‚          â”‚    â”‚  â†’ Send to      â”‚      â”‚
â”‚  â”‚     queue       â”‚     â”‚      â”‚          â”‚    â”‚    Twilio WS    â”‚      â”‚
â”‚  â”‚                 â”‚     â”‚      â”‚          â”‚    â”‚                 â”‚      â”‚
â”‚  â”‚ â€¢ "stop" event  â”‚     â”‚      â”‚          â”‚    â”‚                 â”‚      â”‚
â”‚  â”‚   â†’ Break loop  â”‚     â”‚      â”‚          â”‚    â”‚                 â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                  â”‚                        â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚                        â”‚
                                   â–¼                        â–²
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
                    â”‚         DEEPGRAM AGENT API           â”‚â”‚
                    â”‚    (wss://agent.deepgram.com)        â”‚â”‚
                    â”‚                                      â”‚â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
                    â”‚  â”‚  1. LISTEN (Speech-to-Text)    â”‚  â”‚â”‚
                    â”‚  â”‚     â€¢ Model: Nova-3            â”‚  â”‚â”‚
                    â”‚  â”‚     â€¢ Input: mulaw @ 8kHz      â”‚  â”‚â”‚
                    â”‚  â”‚     â€¢ Output: Transcribed text â”‚  â”‚â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
                    â”‚               â”‚                      â”‚â”‚
                    â”‚               â–¼                      â”‚â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
                    â”‚  â”‚  2. THINK (AI Processing)      â”‚  â”‚â”‚
                    â”‚  â”‚     â€¢ Model: GPT-4o-mini       â”‚  â”‚â”‚
                    â”‚  â”‚     â€¢ Temperature: 0.7         â”‚  â”‚â”‚
                    â”‚  â”‚     â€¢ Prompt: Doctor persona   â”‚  â”‚â”‚
                    â”‚  â”‚     â€¢ Output: AI response text â”‚  â”‚â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
                    â”‚               â”‚                      â”‚â”‚
                    â”‚               â–¼                      â”‚â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
                    â”‚  â”‚  3. SPEAK (Text-to-Speech)     â”‚  â”‚â”‚
                    â”‚  â”‚     â€¢ Model: Aura-2 Thalia     â”‚  â”‚â”‚
                    â”‚  â”‚     â€¢ Output: mulaw @ 8kHz     â”‚  â”‚â”‚
                    â”‚  â”‚     â€¢ Returns: Audio bytes     â”‚  â”‚â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
                    â”‚               â”‚                      â”‚â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DATA STRUCTURES                                    â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  audio_queue = asyncio.Queue()                                  â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚       â”‚
â”‚  â”‚  â”‚  Purpose: Pass audio from Twilio to Deepgram          â”‚     â”‚       â”‚
â”‚  â”‚  â”‚  Producer: twilio_receiver                            â”‚     â”‚       â”‚
â”‚  â”‚  â”‚  Consumer: sts_sender                                 â”‚     â”‚       â”‚
â”‚  â”‚  â”‚  Contents: Raw mulaw audio chunks (3200 bytes each)   â”‚     â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  streamsid_queue = asyncio.Queue()                              â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚       â”‚
â”‚  â”‚  â”‚  Purpose: Pass stream ID to sts_receiver              â”‚     â”‚       â”‚
â”‚  â”‚  â”‚  Producer: twilio_receiver                            â”‚     â”‚       â”‚
â”‚  â”‚  â”‚  Consumer: sts_receiver                               â”‚     â”‚       â”‚
â”‚  â”‚  â”‚  Contents: Single string (stream identifier)          â”‚     â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BARGE-IN FLOW (Interruption)                         â”‚
â”‚                                                                             â”‚
â”‚  User interrupts AI while it's speaking:                                    â”‚
â”‚                                                                             â”‚
â”‚  1. User starts speaking                                                    â”‚
â”‚     â”‚                                                                        â”‚
â”‚     â–¼                                                                        â”‚
â”‚  2. Deepgram detects speech                                                 â”‚
â”‚     â”‚                                                                        â”‚
â”‚     â–¼                                                                        â”‚
â”‚  3. Sends JSON: {"type": "UserStartedSpeaking"}                             â”‚
â”‚     â”‚                                                                        â”‚
â”‚     â–¼                                                                        â”‚
â”‚  4. sts_receiver receives it                                                â”‚
â”‚     â”‚                                                                        â”‚
â”‚     â–¼                                                                        â”‚
â”‚  5. Calls handle_text_message()                                             â”‚
â”‚     â”‚                                                                        â”‚
â”‚     â–¼                                                                        â”‚
â”‚  6. Calls handle_barge_in()                                                 â”‚
â”‚     â”‚                                                                        â”‚
â”‚     â–¼                                                                        â”‚
â”‚  7. Sends to Twilio: {"event": "clear", "streamSid": "..."}                 â”‚
â”‚     â”‚                                                                        â”‚
â”‚     â–¼                                                                        â”‚
â”‚  8. Twilio stops playing current audio                                      â”‚
â”‚     â”‚                                                                        â”‚
â”‚     â–¼                                                                        â”‚
â”‚  9. New user input is processed immediately                                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          AUDIO DATA FLOW                                    â”‚
â”‚                                                                             â”‚
â”‚  INCOMING (User â†’ AI):                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  mulaw   â”Œâ”€â”€â”€â”€â”€â”€â”€â”  base64  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  mulaw  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ User â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚Twilio â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚  Your   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚Deepgram  â”‚    â”‚
â”‚  â”‚speaksâ”‚          â”‚       â”‚  encoded â”‚ Server  â”‚  chunks â”‚   STT    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                            â”‚                               â”‚
â”‚                                            â”‚ (buffered in audio_queue)     â”‚
â”‚                                            â–¼                               â”‚
â”‚                                       3200 bytes                           â”‚
â”‚                                       (400ms audio)                        â”‚
â”‚                                                                             â”‚
â”‚  OUTGOING (AI â†’ User):                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  mulaw   â”Œâ”€â”€â”€â”€â”€â”€â”€â”  base64  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  mulaw  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ User â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚Twilio â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  Your   â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”‚Deepgram  â”‚    â”‚
â”‚  â”‚hears â”‚          â”‚       â”‚  encoded â”‚ Server  â”‚  bytes  â”‚   TTS    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          MESSAGE TYPES                                      â”‚
â”‚                                                                             â”‚
â”‚  FROM TWILIO:                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ â€¢ "start"     â†’ Contains streamSid                             â”‚         â”‚
â”‚  â”‚ â€¢ "connected" â†’ Connection established                         â”‚         â”‚
â”‚  â”‚ â€¢ "media"     â†’ Audio chunk (base64 encoded)                   â”‚         â”‚
â”‚  â”‚ â€¢ "stop"      â†’ Call ended                                     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                             â”‚
â”‚  FROM DEEPGRAM:                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ â€¢ String (JSON):                                               â”‚         â”‚
â”‚  â”‚   - {"type": "UserStartedSpeaking"}                            â”‚         â”‚
â”‚  â”‚   - Transcription results                                      â”‚         â”‚
â”‚  â”‚   - Agent events                                               â”‚         â”‚
â”‚  â”‚                                                                â”‚         â”‚
â”‚  â”‚ â€¢ Binary (bytes):                                              â”‚         â”‚
â”‚  â”‚   - AI-generated speech audio (mulaw)                          â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                             â”‚
â”‚  TO TWILIO:                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ â€¢ "media" event â†’ Play audio to user                           â”‚         â”‚
â”‚  â”‚   {                                                            â”‚         â”‚
â”‚  â”‚     "event": "media",                                          â”‚         â”‚
â”‚  â”‚     "streamSid": "...",                                        â”‚         â”‚
â”‚  â”‚     "media": {"payload": "base64_audio"}                       â”‚         â”‚
â”‚  â”‚   }                                                            â”‚         â”‚
â”‚  â”‚                                                                â”‚         â”‚
â”‚  â”‚ â€¢ "clear" event â†’ Stop current playback                        â”‚         â”‚
â”‚  â”‚   {                                                            â”‚         â”‚
â”‚  â”‚     "event": "clear",                                          â”‚         â”‚
â”‚  â”‚     "streamSid": "..."                                         â”‚         â”‚
â”‚  â”‚   }                                                            â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TIMING & LATENCY                                    â”‚
â”‚                                                                             â”‚
â”‚  Buffer Size: 20 Ã— 160 bytes = 3200 bytes = 400ms of audio                  â”‚
â”‚                                                                             â”‚
â”‚  Why 400ms?                                                                 â”‚
â”‚  â€¢ Smaller chunks â†’ More processing overhead, less latency                  â”‚
â”‚  â€¢ Larger chunks â†’ Less processing overhead, more latency                   â”‚
â”‚  â€¢ 400ms is a good balance for natural conversation                         â”‚
â”‚                                                                             â”‚
â”‚  Total Latency Breakdown:                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ 1. Audio buffering:        ~400ms                              â”‚         â”‚
â”‚  â”‚ 2. Network to Deepgram:    ~50-100ms                           â”‚         â”‚
â”‚  â”‚ 3. STT processing:         ~100-200ms                          â”‚         â”‚
â”‚  â”‚ 4. GPT-4o-mini thinking:   ~500-1000ms                         â”‚         â”‚
â”‚  â”‚ 5. TTS generation:         ~200-300ms                          â”‚         â”‚
â”‚  â”‚ 6. Network back:           ~50-100ms                           â”‚         â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚         â”‚
â”‚  â”‚ TOTAL:                     ~1.3-2.1 seconds                    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                             â”‚
â”‚  This is acceptable for natural conversation!                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FUNCTION CALL SEQUENCE                                 â”‚
â”‚                                                                             â”‚
â”‚  When a call comes in:                                                      â”‚
â”‚                                                                             â”‚
â”‚  1. handle_incoming_call()                                                  â”‚
â”‚     â””â”€ Returns TwiML                                                        â”‚
â”‚                                                                             â”‚
â”‚  2. handle_media_stream()                                                   â”‚
â”‚     â”œâ”€ websocket.accept()                                                   â”‚
â”‚     â”œâ”€ Create queues                                                        â”‚
â”‚     â”œâ”€ sts_connect()                                                        â”‚
â”‚     â”‚  â””â”€ Returns WebSocket to Deepgram                                     â”‚
â”‚     â”œâ”€ load_config()                                                        â”‚
â”‚     â”‚  â””â”€ Returns config.json contents                                      â”‚
â”‚     â””â”€ asyncio.gather()                                                     â”‚
â”‚        â”œâ”€ twilio_receiver()                                                 â”‚
â”‚        â”‚  â”œâ”€ Receives "start" â†’ streamsid_queue.put()                       â”‚
â”‚        â”‚  â”œâ”€ Receives "media" â†’ decode â†’ buffer                             â”‚
â”‚        â”‚  â””â”€ When buffer full â†’ audio_queue.put()                           â”‚
â”‚        â”‚                                                                     â”‚
â”‚        â”œâ”€ sts_sender()                                                      â”‚
â”‚        â”‚  â”œâ”€ audio_queue.get()                                              â”‚
â”‚        â”‚  â””â”€ sts_ws.send()                                                  â”‚
â”‚        â”‚                                                                     â”‚
â”‚        â””â”€ sts_receiver()                                                    â”‚
â”‚           â”œâ”€ streamsid_queue.get()                                          â”‚
â”‚           â”œâ”€ Receives from Deepgram                                         â”‚
â”‚           â”œâ”€ If text â†’ handle_text_message()                                â”‚
â”‚           â”‚            â””â”€ handle_barge_in()                                 â”‚
â”‚           â”‚               â””â”€ Send "clear" to Twilio                          â”‚
â”‚           â””â”€ If audio â†’ encode â†’ send to Twilio                             â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         KEY TECHNOLOGIES                                    â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Technology   â”‚ Purpose                                         â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚ FastAPI      â”‚ Web framework for HTTP & WebSocket endpoints    â”‚         â”‚
â”‚  â”‚ asyncio      â”‚ Concurrent task execution                       â”‚         â”‚
â”‚  â”‚ websockets   â”‚ Client connection to Deepgram                   â”‚         â”‚
â”‚  â”‚ Twilio       â”‚ Phone call handling & audio streaming           â”‚         â”‚
â”‚  â”‚ Deepgram     â”‚ Speech-to-Text & Text-to-Speech                 â”‚         â”‚
â”‚  â”‚ OpenAI       â”‚ GPT-4o-mini for conversation intelligence       â”‚         â”‚
â”‚  â”‚ mulaw        â”‚ Audio encoding (telephony standard)             â”‚         â”‚
â”‚  â”‚ base64       â”‚ Encoding for WebSocket transmission             â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
